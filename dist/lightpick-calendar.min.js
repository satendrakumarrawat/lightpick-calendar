/**
 * lightpick-calendar
 * @version v1.0.0
 * @link https://github.com/satendrakumarrawat/lightpick-calendar#readme
 * @license ISC
 */
!function(t,e){if("function"==typeof define&&define.amd)define(["moment"],function(t){return e(t)});else if("object"==typeof module&&module.exports){var s="undefined"!=typeof window&&void 0!==window.moment?window.moment:require("moment");module.exports=e(s)}else t.Lightpick=e(t.moment)}(this,function(m){"use strict";var h=window.document,i={field:null,secondField:null,firstDay:1,parentEl:"body",lang:"auto",format:"DD/MM/YYYY",separator:" - ",numberOfMonths:1,numberOfColumns:2,singleDate:!0,autoclose:!0,repick:!1,startDate:null,endDate:null,minDate:null,maxDate:null,disableDates:null,selectForward:!1,selectBackward:!1,minDays:null,maxDays:null,onSelect:null,onOpen:null,onClose:null,onError:null,hoveringTooltip:!0,hideOnBodyClick:!0,footer:!1,disabledDatesInRange:!0,tooltipNights:!1,locale:{buttons:{prev:"&leftarrow;",next:"&rightarrow;",close:"&times;",reset:"Reset",apply:"Apply"},tooltip:["day","days"]}},u=function(t,e){return'<div class="lightpick__toolbar"><button type="button" class="lightpick__previous-action" data-view-mode="'+e+'">'+t.locale.buttons.prev+'</button><button type="button" class="lightpick__next-action" data-view-mode="'+e+'">'+t.locale.buttons.next+"</button>"+(t.autoclose?"":'<button type="button" class="lightpick__close-action">'+t.locale.buttons.close+"</button>")+"</div>"},f=function(t,e,s){return new Date(1970,0,e).toLocaleString(t.lang,{weekday:s?"short":"long"})},_=function(t,e,s,i){if(s)return"<div></div>";e=m(e);var a=m(e).subtract(1,"month"),n=m(e).add(1,"month"),o={time:m(e).valueOf(),className:["lightpick__day","is-available"]};if(i instanceof Array||"[object Array]"===Object.prototype.toString.call(i)?(i=i.filter(function(t){return["is-start-date","is-in-range","is-end-date","is-disabled","is-flipped","is-forward-selected"].indexOf(t)<0}),o.className=o.className.concat(i)):o.className.push(i),t.disableDates)for(var l=0;l<t.disableDates.length;l++){if(t.disableDates[l]instanceof Array||"[object Array]"===Object.prototype.toString.call(t.disableDates[l])){var r=m(t.disableDates[l][0]),d=m(t.disableDates[l][1]);r.isValid()&&d.isValid()&&e.isBetween(r,d,"day","[]")&&o.className.push("is-disabled")}else m(t.disableDates[l]).isValid()&&m(t.disableDates[l]).isSame(e,"day")&&o.className.push("is-disabled");0<=o.className.indexOf("is-disabled")&&(0<=o.className.indexOf("is-start-date")?(this.setStartDate(null),this.setEndDate(null)):0<=o.className.indexOf("is-end-date")&&this.setEndDate(null))}t.minDays&&t.startDate&&!t.endDate&&e.isBetween(m(t.startDate).subtract(t.minDays-1,"day"),m(t.startDate).add(t.minDays-1,"day"),"day")&&(o.className.push("is-disabled"),t.selectForward&&e.isSameOrAfter(t.startDate)&&(o.className.push("is-forward-selected"),o.className.push("is-in-range"))),t.maxDays&&t.startDate&&!t.endDate&&(e.isSameOrBefore(m(t.startDate).subtract(t.maxDays,"day"),"day")?o.className.push("is-disabled"):e.isSameOrAfter(m(t.startDate).add(t.maxDays,"day"),"day")&&o.className.push("is-disabled")),e.isSame(new Date,"day")&&o.className.push("is-today"),e.isSame(t.startDate,"day")&&o.className.push("is-start-date"),e.isSame(t.endDate,"day")&&o.className.push("is-end-date"),t.startDate&&t.endDate&&e.isBetween(t.startDate,t.endDate,"day","[]")&&o.className.push("is-in-range"),m().isSame(e,"month")||(a.isSame(e,"month")?o.className.push("is-previous-month"):n.isSame(e,"month")&&o.className.push("is-next-month")),t.minDate&&e.isBefore(t.minDate,"day")&&o.className.push("is-disabled"),t.maxDate&&e.isAfter(t.maxDate,"day")&&o.className.push("is-disabled"),t.selectForward&&!t.singleDate&&t.startDate&&!t.endDate&&e.isBefore(t.startDate,"day")&&o.className.push("is-disabled"),t.selectBackward&&!t.singleDate&&t.startDate&&!t.endDate&&e.isAfter(t.startDate,"day")&&o.className.push("is-disabled"),o.className=o.className.filter(function(t,e,s){return s.indexOf(t)===e}),0<=o.className.indexOf("is-disabled")&&0<=o.className.indexOf("is-available")&&o.className.splice(o.className.indexOf("is-available"),1);var c=h.createElement("div");return c.className=o.className.join(" "),c.innerHTML=e.get("date"),c.setAttribute("data-time",o.time),c.outerHTML},e=function(t,e){for(var s="",i=m(e.calendar[0]),a=0;a<e.numberOfMonths;a++){var n=m(i);s+='<section class="lightpick__month">',s+='<header class="lightpick__month-title-bar">',s+='<h1 class="lightpick__month-title" data-ym="'+n.format("YYYY-MM")+'"><b class="lightpick__month-title-accent">'+n.toDate().toLocaleString(e.lang,{month:"long"})+"</b> "+n.format("YYYY")+"</h1>",1===e.numberOfMonths&&(s+=u(e,"days")),s+="</header>",s+='<div class="lightpick__days-of-the-week">';for(var o=e.firstDay+4;o<7+e.firstDay+4;++o)s+='<div class="lightpick__day-of-the-week" title="'+f(e,o)+'">'+f(e,o,!0)+"</div>";if(s+="</div>",s+='<div class="lightpick__days">',n.isoWeekday()!==e.firstDay)for(var l=0<n.isoWeekday()-e.firstDay?n.isoWeekday()-e.firstDay:n.isoWeekday(),r=m(n).subtract(l,"day"),d=r.daysInMonth(),c=r.get("date");c<=d;c++)s+=_(e,r,0<a,"is-previous-month"),r.add(1,"day");for(d=n.daysInMonth(),new Date,c=0;c<d;c++)s+=_(e,n),n.add(1,"day");var h=m(n),p=7-h.isoWeekday()+e.firstDay;for(c=h.get("date");c<=p;c++)s+=_(e,h,a<e.numberOfMonths-1,"is-next-month"),h.add(1,"day");s+="</div>",s+="</section>",i.add(1,"month")}e.calendar[1]=m(i),t.querySelector(".lightpick__months").innerHTML=s},d=function(t,e,s){s&&(e.calendar[0]=m(s));var i=m(e.calendar[0]),a='<header class="lightpick__month-title-bar">';a+='<h1 class="lightpick__month-title">'+i.format("YYYY")+"</h1>",a+=u(e,"months"),a+="</header>",a+='<div class="lightpick__months-of-the-year-list">';for(var n=1;n<=12;n++)a+='<div class="lightpick__month-of-the-year" data-goto-month="'+i.format("YYYY")+"-"+n+'"><div>'+m(n,"M").toDate().toLocaleString(e.lang,{month:"long"})+"</div><div>"+i.format("YYYY")+"</div></div>";a+="</div>",t.querySelector(".lightpick__months-of-the-year").innerHTML=a},c=function(t,e){var s=t.querySelectorAll(".lightpick__day");[].forEach.call(s,function(t){t.outerHTML=_(e,parseInt(t.getAttribute("data-time")),!1,t.className.split(" "))}),a(t,e)},a=function(t,s){if(!s.disabledDatesInRange&&s.startDate&&!s.endDate&&s.disableDates){var e=t.querySelectorAll(".lightpick__day"),i=s.disableDates.map(function(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)?t[0]:t}),a=m(i.filter(function(t){return m(t).isBefore(s.startDate)}).sort(function(t,e){return m(e).isAfter(m(t))})[0]),n=m(i.filter(function(t){return m(t).isAfter(s.startDate)}).sort(function(t,e){return m(t).isAfter(m(e))})[0]);[].forEach.call(e,function(t){var e=m(parseInt(t.getAttribute("data-time")));(a&&e.isBefore(a)&&s.startDate.isAfter(a)||n&&e.isAfter(n)&&n.isAfter(s.startDate))&&(t.classList.remove("is-available"),t.classList.add("is-disabled"))})}},t=function(t){var _=this,i=_.config(t);_.el=h.createElement("section"),_.el.className="lightpick lightpick--"+i.numberOfColumns+"-columns is-hidden","body"!==i.parentEl&&(_.el.className+=" lightpick--inlined");var e='<div class="lightpick__inner">'+(1<i.numberOfMonths?u(i,"days"):"")+'<div class="lightpick__months"></div><div class="lightpick__tooltip" style="visibility: hidden"></div><div class="lightpick__months-of-the-year"></div>';i.footer&&(e+='<div class="lightpick__footer">',!0===i.footer?(e+='<button type="button" class="lightpick__reset-action">'+i.locale.buttons.reset+"</button>",e+='<div class="lightpick__footer-message"></div>',e+='<button type="button" class="lightpick__apply-action">'+i.locale.buttons.apply+"</button>"):e+=i.footer,e+="</div>"),e+="</div>",_.el.innerHTML=e,h.querySelector(i.parentEl).appendChild(_.el),_._onMouseDown=function(t){if(_.isShowing){var e=(t=t||window.event).target||t.srcElement;if(e){t.stopPropagation(),t.preventDefault();var s=_._opts;if(e.classList.contains("lightpick__day")&&e.classList.contains("is-available")){var i=m(parseInt(e.getAttribute("data-time")));if(!s.disabledDatesInRange&&s.disableDates&&s.startDate){var a=i.isAfter(s.startDate)?m(s.startDate):m(i),n=i.isAfter(s.startDate)?m(i):m(s.startDate);if(s.disableDates.filter(function(t){if(t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)){var e=m(t[0]),s=m(t[1]);return e.isValid()&&s.isValid()&&(e.isBetween(a,n,"day","[]")||s.isBetween(a,n,"day","[]"))}return m(t).isBetween(a,n,"day","[]")}).length)return _.setStartDate(null),_.setEndDate(null),e.dispatchEvent(new Event("mousedown")),_.el.querySelector(".lightpick__tooltip").style.visibility="hidden",void c(_.el,s)}if(s.singleDate||!s.startDate&&!s.endDate||s.startDate&&s.endDate?s.repick&&s.startDate&&s.endDate?(s.repickTrigger===s.field?(_.setStartDate(i),e.classList.add("is-start-date")):(_.setEndDate(i),e.classList.add("is-end-date")),s.startDate.isAfter(s.endDate)&&_.swapDate(),s.autoclose&&setTimeout(function(){_.hide()},100)):(_.setStartDate(i),_.setEndDate(null),e.classList.add("is-start-date"),s.singleDate&&s.autoclose?setTimeout(function(){_.hide()},100):s.singleDate||c(_.el,s)):s.startDate&&!s.endDate&&(_.setEndDate(i),s.startDate.isAfter(s.endDate)&&_.swapDate(),e.classList.add("is-end-date"),s.autoclose?setTimeout(function(){_.hide()},100):c(_.el,s)),!s.disabledDatesInRange&&0===_.el.querySelectorAll(".lightpick__day.is-available").length&&(_.setStartDate(null),c(_.el,s),s.footer))if("function"==typeof _._opts.onError)_._opts.onError.call(_,"Invalid range");else{var o=_.el.querySelector(".lightpick__footer-message");o&&(o.innerHTML=s.locale.not_allowed_range,setTimeout(function(){o.innerHTML=""},3e3))}}else if(e.classList.contains("lightpick__previous-action")){if(e.hasAttribute("data-view-mode"))switch(e.getAttribute("data-view-mode")){case"days":_.prevMonth();break;case"months":_.prevYear()}}else if(e.classList.contains("lightpick__next-action")){if(e.hasAttribute("data-view-mode"))switch(e.getAttribute("data-view-mode")){case"days":_.nextMonth();break;case"months":_.nextYear()}}else if(e.classList.contains("lightpick__close-action")||e.classList.contains("lightpick__apply-action"))_.hide();else if(e.classList.contains("lightpick__reset-action"))_.reset();else if(e.classList.contains("lightpick__month-title")){if(e.hasAttribute("data-ym"))(l=_.el.querySelector(".lightpick__inner > .lightpick__toolbar"))&&(l.style.display="none"),_.el.querySelector(".lightpick__months").innerHTML="",d(_.el,s,e.getAttribute("data-ym"))}else if(e.hasAttribute("data-goto-month")){var l,r=m(e.getAttribute("data-goto-month"),"YYYY-M");if(r.isValid())_.gotoDate(r),_.el.querySelector(".lightpick__months-of-the-year").innerHTML="",(l=_.el.querySelector(".lightpick__inner > .lightpick__toolbar"))&&(l.style.display="flex")}}}},_._onMouseEnter=function(t){if(_.isShowing){var e=(t=t||window.event).target||t.srcElement;if(e){var s,i,a=_._opts;if(!a.singleDate&&(a.startDate||a.endDate))if(e.classList.contains("lightpick__day")||e.classList.contains("is-available"))if(a.startDate&&!a.endDate||a.repick){var n=m(parseInt(e.getAttribute("data-time")));if(!n.isValid())return;var o=a.startDate&&!a.endDate||a.repick&&a.repickTrigger===a.secondField?a.startDate:a.endDate,l=_.el.querySelectorAll(".lightpick__day");if([].forEach.call(l,function(t){var e=m(parseInt(t.getAttribute("data-time")));t.classList.remove("is-flipped"),e.isValid()&&e.isSameOrAfter(o,"day")&&e.isSameOrBefore(n,"day")?(t.classList.add("is-in-range"),a.repickTrigger===a.field&&e.isSameOrAfter(a.endDate)&&t.classList.add("is-flipped")):e.isValid()&&e.isSameOrAfter(n,"day")&&e.isSameOrBefore(o,"day")?(t.classList.add("is-in-range"),(a.startDate&&!a.endDate||a.repickTrigger===a.secondField)&&e.isSameOrBefore(a.startDate)&&t.classList.add("is-flipped")):t.classList.remove("is-in-range"),a.startDate&&a.endDate&&a.repick&&a.repickTrigger===a.field?t.classList.remove("is-start-date"):t.classList.remove("is-end-date")}),a.hoveringTooltip){l=Math.abs(n.isAfter(o)?n.diff(o,"day"):o.diff(n,"day")),a.tooltipNights||(l+=1);var r=_.el.querySelector(".lightpick__tooltip");if(0<l&&!e.classList.contains("is-disabled")){var d=_.el.classList.contains("lightpick--inlined"),c=e.getBoundingClientRect(),h=d?_.el.parentNode.getBoundingClientRect():_.el.getBoundingClientRect(),p=c.left-h.left+c.width/2,u=c.top-h.top;r.style.visibility="visible",r.textContent=l+" "+(s=l,i=a.locale.tooltip,s%10==1&&s%100!=11?i[0]:2<=s%10&&s%10<=4&&(s%100<10||20<=s%100)?i[1]:i[2]||i[1]);var f=r.getBoundingClientRect();u-=f.height,p-=f.width/2,setTimeout(function(){r.style.top=u+"px",r.style.left=p+"px"},10)}else r.style.visibility="hidden"}a.startDate&&a.endDate&&a.repick&&a.repickTrigger===a.field?e.classList.add("is-start-date"):e.classList.add("is-end-date")}}}},_._onChange=function(t){var e=(t=t||window.event).target||t.srcElement;e&&(e.classList.contains("is-selected-lightpick-month")?_.gotoMonth(e.value):e.classList.contains("is-selected-lightpick-year")&&_.gotoYear(e.value))},_._onInputChange=function(t){t.target||t.srcElement;_._opts.singleDate&&(_._opts.autoclose||_.gotoDate(i.field.value),_.setStartDate(i.field.value)),_.isShowing||_.show()},_._onInputFocus=function(t){var e=t.target||t.srcElement;_.show(e)},_._onInputClick=function(t){var e=t.target||t.srcElement;_.show(e)},_._onClick=function(t){var e=(t=t||window.event).target||t.srcElement,s=e;if(e){do{if(s.classList&&s.classList.contains("lightpick")||s===i.field||i.secondField&&s===i.secondField)return}while(s=s.parentNode);_.isShowing&&i.hideOnBodyClick&&e!==i.field&&s!==i.field&&_.hide()}},_.el.addEventListener("mousedown",_._onMouseDown,!0),_.el.addEventListener("mouseenter",_._onMouseEnter,!0),_.el.addEventListener("touchend",_._onMouseDown,!0),_.hide(),i.field.addEventListener("change",_._onInputChange),i.field.addEventListener("click",_._onInputClick),i.field.addEventListener("focus",_._onInputFocus),i.secondField&&(i.secondField.addEventListener("change",_._onInputChange),i.secondField.addEventListener("click",_._onInputClick),i.secondField.addEventListener("focus",_._onInputFocus))};return t.prototype={config:function(t){var e=Object.assign({},i,t);if(e.field=e.field&&e.field.nodeName?e.field:null,e.calendar=[m().set("date",1)],1===e.numberOfMonths&&1<e.numberOfColumns&&(e.numberOfColumns=1),e.minDate=e.minDate&&m(e.minDate).isValid()?m(e.minDate):null,e.maxDate=e.maxDate&&m(e.maxDate).isValid()?m(e.maxDate):null,"auto"===e.lang){var s=navigator.language||navigator.userLanguage;e.lang=s||"en-US"}return e.secondField&&e.singleDate&&(e.singleDate=!1),e.hoveringTooltip&&e.singleDate&&(e.hoveringTooltip=!1),"[object Object]"===Object.prototype.toString.call(t.locale)&&(e.locale=Object.assign({},i.locale,t.locale)),window.innerWidth<480&&1<e.numberOfMonths&&(e.numberOfMonths=1,e.numberOfColumns=1),e.repick&&!e.secondField&&(e.repick=!1),this._opts=Object.assign({},e),this.setStartDate(e.startDate,!0),this.setEndDate(e.endDate,!0),e},swapDate:function(){var t=m(this._opts.startDate);this.setDateRange(this._opts.endDate,t)},gotoToday:function(){this.gotoDate(new Date)},gotoDate:function(t){(t=m(t)).isValid()||(t=m()),t.set("date",1),this._opts.calendar=[m(t)],e(this.el,this._opts)},gotoMonth:function(t){isNaN(t)||(this._opts.calendar[0].set("month",t),e(this.el,this._opts))},prevMonth:function(){this._opts.calendar[0]=m(this._opts.calendar[0]).subtract(this._opts.numberOfMonths,"month"),e(this.el,this._opts),a(this.el,this._opts)},nextMonth:function(){this._opts.calendar[0]=m(this._opts.calendar[1]),e(this.el,this._opts),a(this.el,this._opts)},prevYear:function(){this._opts.calendar[0]=m(this._opts.calendar[0]).subtract(1,"year"),d(this.el,this._opts)},nextYear:function(){this._opts.calendar[0]=m(this._opts.calendar[0]).add(1,"year"),d(this.el,this._opts)},updatePosition:function(){if(!this.el.classList.contains("lightpick--inlined")){var t=this._opts.field.getBoundingClientRect();this.el.style.top=t.bottom+window.pageYOffset+"px",this.el.style.left=t.left+window.pageXOffset+"px"}},setStartDate:function(t,e){if(!(t=m(t)).isValid())return this._opts.startDate=null,void(this._opts.field.value="");this._opts.startDate=m(t),this._opts.singleDate||this._opts.secondField?this._opts.field.value=this._opts.startDate.format(this._opts.format):this._opts.field.value=this._opts.startDate.format(this._opts.format)+this._opts.separator+"...",e||"function"!=typeof this._opts.onSelect||this._opts.onSelect.call(this,this.getStartDate(),this.getEndDate())},setEndDate:function(t,e){if(!(t=m(t)).isValid())return this._opts.endDate=null,void(this._opts.secondField?this._opts.secondField.value="":!this._opts.singleDate&&this._opts.startDate&&(this._opts.field.value=this._opts.startDate.format(this._opts.format)+this._opts.separator+"..."));this._opts.endDate=m(t),this._opts.secondField?(this._opts.field.value=this._opts.startDate.format(this._opts.format),this._opts.secondField.value=this._opts.endDate.format(this._opts.format)):this._opts.field.value=this._opts.startDate.format(this._opts.format)+this._opts.separator+this._opts.endDate.format(this._opts.format),e||"function"!=typeof this._opts.onSelect||this._opts.onSelect.call(this,this.getStartDate(),this.getEndDate())},setDate:function(t){this._opts.singleDate&&this.setStartDate(t,!0)},setDateRange:function(t,e,s){this._opts.singleDate||(this.setStartDate(t,!0),this.setEndDate(e,!0),this.isShowing&&c(this.el,this._opts),s||"function"!=typeof this._opts.onSelect||this._opts.onSelect.call(this,this.getStartDate(),this.getEndDate()))},setDisableDates:function(t){this._opts.disableDates=t,this.isShowing&&c(this.el,this._opts)},getStartDate:function(){return m(this._opts.startDate).isValid()?this._opts.startDate:null},getEndDate:function(){return m(this._opts.endDate).isValid()?this._opts.endDate:null},getDate:function(){return m(this._opts.startDate).isValid()?this._opts.startDate:null},toString:function(t){return this._opts.singleDate?m(this._opts.startDate).isValid()?this._opts.startDate.format(t):"":m(this._opts.startDate).isValid()&&m(this._opts.endDate).isValid()?this._opts.startDate.format(t)+this._opts.separator+this._opts.endDate.format(t):m(this._opts.startDate).isValid()&&!m(this._opts.endDate).isValid()?this._opts.startDate.format(t)+this._opts.separator+"...":!m(this._opts.startDate).isValid()&&m(this._opts.endDate).isValid()?"..."+this._opts.separator+this._opts.endDate.format(t):""},show:function(t){this.isShowing||(this.isShowing=!0,this._opts.repick&&(this._opts.repickTrigger=t),this._opts.secondField&&this._opts.secondField===t&&this._opts.endDate?this.gotoDate(this._opts.endDate):this.gotoDate(this._opts.startDate),h.addEventListener("click",this._onClick),this.updatePosition(),this.el.classList.remove("is-hidden"),"function"==typeof this._opts.onOpen&&this._opts.onOpen.call(this),this.el.querySelector(".lightpick__months-of-the-year").innerHTML="",h.activeElement&&h.activeElement!=h.body&&h.activeElement.blur())},hide:function(){this.isShowing&&(this.isShowing=!1,h.removeEventListener("click",this._onClick),this.el.classList.add("is-hidden"),this.el.querySelector(".lightpick__tooltip").style.visibility="hidden","function"==typeof this._opts.onClose&&this._opts.onClose.call(this))},destroy:function(){var t=this._opts;this.hide(),this.el.removeEventListener("mousedown",this._onMouseDown,!0),this.el.removeEventListener("touchend",this._onMouseDown,!0),this.el.removeEventListener("change",this._onChange,!0),t.field.removeEventListener("change",this._onInputChange),t.field.removeEventListener("click",this._onInputClick),t.field.removeEventListener("focus",this._onInputFocus),t.secondField&&(t.secondField.removeEventListener("change",this._onInputChange),t.secondField.removeEventListener("click",this._onInputClick),t.secondField.removeEventListener("focus",this._onInputFocus)),this.el.parentNode&&this.el.parentNode.removeChild(this.el)},reset:function(){this.setStartDate(null,!0),this.setEndDate(null,!0),c(this.el,this._opts),"function"==typeof this._opts.onSelect&&this._opts.onSelect.call(this,this.getStartDate(),this.getEndDate()),this.el.querySelector(".lightpick__tooltip").style.visibility="hidden"},reloadOptions:function(t){this._opts=Object.assign({},this._opts,t)}},t});